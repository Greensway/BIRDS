<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Working with xts time series • BIRDS</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Working with xts time series">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-147720899-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-147720899-1');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">BIRDS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/BIRDS.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Documents
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/technical_details.html">BIRDS technical details</a>
    </li>
    <li>
      <a href="../articles/working_with_xts_timeseries.html">Working with xts time series</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/greensway/BIRDS">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Working with xts time series</h1>
                        <h4 class="author">Alejandro Ruete</h4>
            
            <h4 class="date">2019-10-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/greensway/BIRDS/blob/master/vignettes/working_with_xts_timeseries.Rmd"><code>vignettes/working_with_xts_timeseries.Rmd</code></a></small>
      <div class="hidden name"><code>working_with_xts_timeseries.Rmd</code></div>

    </div>

    
    
<p>This vignette is adapted from <a href="https://rpubs.com/RLodge/timeseriesintro" class="uri">https://rpubs.com/RLodge/timeseriesintro</a></p>
<div id="xts-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#xts-objects" class="anchor"></a>xts Objects</h2>
<p>One of the objects that comes out of the <code>summariseBirds()</code> function is <code>$temporal</code>, a <code>xts</code> object. A <code>xts</code> is a time series (a series of data points in chronological order, where time is the independent variable). The ‘x’ in xts stands for extensible, because it is an extension of <code>zoo</code> (another package). An <code>xts</code> object is formed just as a <code>zoo</code> object is. However, an <code>xts</code> object is in matrix form and thus is easier to subset through.</p>
<p>If we start from the basic example</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(BIRDS)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(xts)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co"># Create a grid for your sample area that will be used to summarise the data:</span></a>
<a class="sourceLine" id="cb1-4" title="4">grid &lt;-<span class="st"> </span><span class="kw"><a href="../reference/makeGrid.html">makeGrid</a></span>(gotaland, <span class="dt">gridSize =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co"># The grid can be easily created in different ways. </span></a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co"># Import the species observation data:</span></a>
<a class="sourceLine" id="cb1-8" title="8">PBD&lt;-bombusObs</a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co"># alternatively, you could load a previously downloaded .CSV file </span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co"># PBD &lt;- read.csv(file="path/to/your/file.csv)</span></a>
<a class="sourceLine" id="cb1-11" title="11"></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="co"># Convert the data from an observation-based to a visit-based format, </span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="co"># adding a unique identifier for each visit:</span></a>
<a class="sourceLine" id="cb1-14" title="14">OB &lt;-<span class="st"> </span><span class="kw"><a href="../reference/organizeBirds.html">organizeBirds</a></span>(PBD, <span class="dt">sppCol =</span> <span class="st">"scientificName"</span>, <span class="dt">simplifySppName =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1-15" title="15"></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="co"># Summarise the data:</span></a>
<a class="sourceLine" id="cb1-17" title="17">SB &lt;-<span class="st"> </span><span class="kw"><a href="../reference/summarizeBirds.html">summariseBirds</a></span>(OB, <span class="dt">grid=</span>grid)</a></code></pre></div>
<p>we see that SB contains an element called <code>SB$temporal</code> that contains a daily time series with time specific rows when there is information. <code>xts</code> also supports time, but dating below day resolution is not yet implementen in the <code>BIRDS</code> package.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">sb.xts&lt;-SB<span class="op">$</span>temporal</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(sb.xts)</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">#&gt;            nObs nVis nSpp</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#&gt; 2000-04-21    1    1    1</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt; 2000-04-24    1    1    1</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt; 2000-04-25    9    5    6</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt; 2000-04-26    7    4    5</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt; 2000-05-05    1    1    1</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">#&gt; 2000-05-28    3    2    3</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/dim">dim</a></span>(sb.xts)</a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co">#&gt; [1] 1726    3</span></a></code></pre></div>
<p>Sub-setting is convenient in <code>xts</code> as you can do it with its dates and with a <code>/</code> for a range of dates.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">sb.xts[<span class="st">"2017-09"</span>] <span class="co">#a specific month</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co">#&gt;            nObs nVis nSpp</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">#&gt; 2017-09-01    1    1    1</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co">#&gt; 2017-09-03    2    2    2</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt; 2017-09-07    1    1    1</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt; 2017-09-09    1    1    1</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt; 2017-09-12    1    1    1</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">#&gt; 2017-09-19    4    2    4</span></a>
<a class="sourceLine" id="cb3-9" title="9">sb.xts[<span class="st">"2017-09-07"</span>] <span class="co">#a specific day</span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt;            nObs nVis nSpp</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt; 2017-09-07    1    1    1</span></a>
<a class="sourceLine" id="cb3-12" title="12">sb.xts[<span class="st">"2017-01-01/2017-05-01"</span>] <span class="co">#for a period</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">#&gt;            nObs nVis nSpp</span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co">#&gt; 2017-03-10    1    1    1</span></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="co">#&gt; 2017-03-22    1    1    1</span></a>
<a class="sourceLine" id="cb3-16" title="16"><span class="co">#&gt; 2017-03-23    2    2    2</span></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="co">#&gt; 2017-03-24    2    2    2</span></a>
<a class="sourceLine" id="cb3-18" title="18"><span class="co">#&gt; 2017-03-25    5    5    3</span></a>
<a class="sourceLine" id="cb3-19" title="19"><span class="co">#&gt; 2017-03-26    6    6    4</span></a>
<a class="sourceLine" id="cb3-20" title="20"><span class="co">#&gt; 2017-03-27    1    1    1</span></a>
<a class="sourceLine" id="cb3-21" title="21"><span class="co">#&gt; 2017-03-28    2    2    2</span></a>
<a class="sourceLine" id="cb3-22" title="22"><span class="co">#&gt; 2017-03-31    3    3    2</span></a>
<a class="sourceLine" id="cb3-23" title="23"><span class="co">#&gt; 2017-04-01    5    5    4</span></a>
<a class="sourceLine" id="cb3-24" title="24"><span class="co">#&gt; 2017-04-02    8    8    3</span></a>
<a class="sourceLine" id="cb3-25" title="25"><span class="co">#&gt; 2017-04-03    6    6    4</span></a>
<a class="sourceLine" id="cb3-26" title="26"><span class="co">#&gt; 2017-04-04    1    1    1</span></a>
<a class="sourceLine" id="cb3-27" title="27"><span class="co">#&gt; 2017-04-05    1    1    1</span></a>
<a class="sourceLine" id="cb3-28" title="28"><span class="co">#&gt; 2017-04-06    2    2    2</span></a>
<a class="sourceLine" id="cb3-29" title="29"><span class="co">#&gt; 2017-04-07    3    3    2</span></a>
<a class="sourceLine" id="cb3-30" title="30"><span class="co">#&gt; 2017-04-08    3    3    2</span></a>
<a class="sourceLine" id="cb3-31" title="31"><span class="co">#&gt; 2017-04-09    9    9    5</span></a>
<a class="sourceLine" id="cb3-32" title="32"><span class="co">#&gt; 2017-04-11    6    6    4</span></a>
<a class="sourceLine" id="cb3-33" title="33"><span class="co">#&gt; 2017-04-12    1    1    1</span></a>
<a class="sourceLine" id="cb3-34" title="34"><span class="co">#&gt; 2017-04-14    5    5    4</span></a>
<a class="sourceLine" id="cb3-35" title="35"><span class="co">#&gt; 2017-04-16    2    2    1</span></a>
<a class="sourceLine" id="cb3-36" title="36"><span class="co">#&gt; 2017-04-19    2    2    2</span></a>
<a class="sourceLine" id="cb3-37" title="37"><span class="co">#&gt; 2017-04-21    1    1    1</span></a>
<a class="sourceLine" id="cb3-38" title="38"><span class="co">#&gt; 2017-04-22    3    3    3</span></a>
<a class="sourceLine" id="cb3-39" title="39"><span class="co">#&gt; 2017-04-23    3    3    2</span></a>
<a class="sourceLine" id="cb3-40" title="40"><span class="co">#&gt; 2017-04-26    3    3    3</span></a>
<a class="sourceLine" id="cb3-41" title="41"><span class="co">#&gt; 2017-04-29    5    5    4</span></a>
<a class="sourceLine" id="cb3-42" title="42"><span class="co">#&gt; 2017-04-30   12   11    6</span></a>
<a class="sourceLine" id="cb3-43" title="43"><span class="co">#&gt; 2017-05-01    4    3    2</span></a></code></pre></div>
<p><code>xts</code> has several tools for converting to different periods. Here we will use <code>to.monthly</code>. This provides, the first, min, max, and last of the data. We can plot the daily maximum number of observations. The plot command with an <code>xts</code> object provides a TON of features. This makes it fairly easy to customize your plots. Read more in <code>?plot.xts</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">obs.m &lt;-<span class="st"> </span><span class="kw">to.monthly</span>(sb.xts<span class="op">$</span>nObs) </a>
<a class="sourceLine" id="cb4-2" title="2">obs.m[<span class="st">"2017-04"</span>]</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">#&gt;          sb.xts$nObs.Open sb.xts$nObs.High sb.xts$nObs.Low</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">#&gt; Apr 2017                5               12               1</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt;          sb.xts$nObs.Close</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">#&gt; Apr 2017                12</span></a>
<a class="sourceLine" id="cb4-7" title="7">sb.xts[<span class="st">"2017-04"</span>]</a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt;            nObs nVis nSpp</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">#&gt; 2017-04-01    5    5    4</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">#&gt; 2017-04-02    8    8    3</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">#&gt; 2017-04-03    6    6    4</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">#&gt; 2017-04-04    1    1    1</span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co">#&gt; 2017-04-05    1    1    1</span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">#&gt; 2017-04-06    2    2    2</span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="co">#&gt; 2017-04-07    3    3    2</span></a>
<a class="sourceLine" id="cb4-16" title="16"><span class="co">#&gt; 2017-04-08    3    3    2</span></a>
<a class="sourceLine" id="cb4-17" title="17"><span class="co">#&gt; 2017-04-09    9    9    5</span></a>
<a class="sourceLine" id="cb4-18" title="18"><span class="co">#&gt; 2017-04-11    6    6    4</span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="co">#&gt; 2017-04-12    1    1    1</span></a>
<a class="sourceLine" id="cb4-20" title="20"><span class="co">#&gt; 2017-04-14    5    5    4</span></a>
<a class="sourceLine" id="cb4-21" title="21"><span class="co">#&gt; 2017-04-16    2    2    1</span></a>
<a class="sourceLine" id="cb4-22" title="22"><span class="co">#&gt; 2017-04-19    2    2    2</span></a>
<a class="sourceLine" id="cb4-23" title="23"><span class="co">#&gt; 2017-04-21    1    1    1</span></a>
<a class="sourceLine" id="cb4-24" title="24"><span class="co">#&gt; 2017-04-22    3    3    3</span></a>
<a class="sourceLine" id="cb4-25" title="25"><span class="co">#&gt; 2017-04-23    3    3    2</span></a>
<a class="sourceLine" id="cb4-26" title="26"><span class="co">#&gt; 2017-04-26    3    3    3</span></a>
<a class="sourceLine" id="cb4-27" title="27"><span class="co">#&gt; 2017-04-29    5    5    4</span></a>
<a class="sourceLine" id="cb4-28" title="28"><span class="co">#&gt; 2017-04-30   12   11    6</span></a>
<a class="sourceLine" id="cb4-29" title="29"></a>
<a class="sourceLine" id="cb4-30" title="30"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(obs.m[<span class="st">"2010/2017"</span>,<span class="dv">2</span>], <span class="dt">col =</span> <span class="st">"darkblue"</span>, <span class="dt">grid.ticks.on =</span> <span class="st">"month"</span>, <span class="dt">major.ticks =</span> <span class="st">"month"</span>, <span class="dt">grid.col =</span> <span class="st">"lightgrey"</span>, <span class="dt">main =</span> <span class="st">"Maximum number of daily observations per month"</span>)</a></code></pre></div>
<p><img src="working_with_xts_timeseries_files/figure-html/monthly%20and%20plot-1.png" width="672"></p>
<p>Only the month with data are ploted in this figure. What if we whant to complete the time series and plot all zeros too? in the original time series there is not data for every day, therefore the time series is incomplete.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># sb.xts.na is same as sb.xts but with all missing days added (with NAs)</span></a>
<a class="sourceLine" id="cb5-2" title="2">rng &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/range">range</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/time">time</a></span>(sb.xts))</a>
<a class="sourceLine" id="cb5-3" title="3">sb.xts.na &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/merge">merge</a></span>(sb.xts, <span class="kw">xts</span>(, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(rng[<span class="dv">1</span>], rng[<span class="dv">2</span>], <span class="dt">by =</span> <span class="st">"day"</span>)))</a></code></pre></div>
<p>However, in our monthly example we may not need data for every day, but month, and this time we need 0s instead of NAs. Even more, we dont want to add zeros for the months we allready have data, because that will change the summary statistics. Then we add 0s for the months we have no data.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">z.seq &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(rng[<span class="dv">1</span>], rng[<span class="dv">2</span>], <span class="dt">by =</span> <span class="st">"month"</span>)</a>
<a class="sourceLine" id="cb6-2" title="2">YM.sb.xts&lt;-<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unique">unique</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.Date">as.Date</a></span>(<span class="kw">as.yearmon</span>(<span class="kw">index</span>(sb.xts))))</a>
<a class="sourceLine" id="cb6-3" title="3">YM.z.seq&lt;-<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.Date">as.Date</a></span>(<span class="kw">as.yearmon</span>(z.seq))</a>
<a class="sourceLine" id="cb6-4" title="4">wTrm &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/which">which</a></span>(YM.z.seq <span class="op">%in%</span><span class="st"> </span>YM.sb.xts)</a>
<a class="sourceLine" id="cb6-5" title="5">z.seq &lt;-<span class="st"> </span>z.seq[<span class="op">-</span>wTrm] <span class="co">## remove the days for which </span></a>
<a class="sourceLine" id="cb6-6" title="6"></a>
<a class="sourceLine" id="cb6-7" title="7">z &lt;-<span class="st"> </span><span class="kw">xts</span>(, z.seq)</a>
<a class="sourceLine" id="cb6-8" title="8"></a>
<a class="sourceLine" id="cb6-9" title="9">sb.xts<span class="fl">.0</span> &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/merge">merge</a></span>(sb.xts, z, <span class="dt">fill =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb6-10" title="10"></a>
<a class="sourceLine" id="cb6-11" title="11">obs.m<span class="fl">.0</span> &lt;-<span class="st"> </span><span class="kw">to.monthly</span>(sb.xts<span class="fl">.0</span><span class="op">$</span>nObs)</a>
<a class="sourceLine" id="cb6-12" title="12"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(obs.m<span class="fl">.0</span>[<span class="st">"2010/2017"</span>,<span class="dv">2</span>], <span class="dt">col =</span> <span class="st">"darkblue"</span>, <span class="dt">grid.ticks.on =</span> <span class="st">"month"</span>, <span class="dt">major.ticks =</span> <span class="st">"month"</span>, <span class="dt">grid.col =</span> <span class="st">"lightgrey"</span>, <span class="dt">main =</span> <span class="st">"Maximum number of daily observations per month"</span>)</a></code></pre></div>
<p><img src="working_with_xts_timeseries_files/figure-html/completting2-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#xts-objects">xts Objects</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Debora Arlt, Alejandro Ruete, Anton Hammarström.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
